<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Josh's Bar Crawl Trivia</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: auto;
      padding: 20px;
      background: #f9f9f9;
      text-align: center;
    }
    h1 { text-align: center; }
    .section {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      margin-top: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
    .section h2 { margin-top: 0; }
    .question-btn {
      margin: 6px;
      padding: 10px 15px;
      border: none;
      border-radius: 4px;
      background: #007bff;
      color: white;
      font-size: 14px;
      cursor: pointer;
    }
    .question-btn:disabled { cursor: not-allowed; background: #ccc; }
    .clue {
      margin-top: 8px;
      padding-left: 10px;
      color: green;
      display: none;
    }
    #final-reveal {
      display: none;
      position: fixed;
      top:0; left:0; width:100%; height:100%;
      background:black; color:white;
      z-index:9999; justify-content:center; align-items:center;
      flex-direction: column; text-align:center;
    }
    #final-reveal h1 { font-size:3em; animation: flash 1s infinite; }
    @keyframes flash {
      0% { color: white; }
      50% { color: gold; }
      100% { color: white; }
    }
    canvas#confetti { position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:10000; }
  </style>
</head>
<body>

<h1>üîç Josh‚Äôs Bar Crawl Clue Game</h1>
<p>Answer questions to unlock clues! You have <strong>3 tries per question</strong>.</p>

<div id="easy" class="section"><h2>‚úÖ Easy Clues</h2></div>
<div id="medium" class="section"><h2>‚ö†Ô∏è Medium Clues</h2></div>
<div id="hard" class="section"><h2>üî• Hard Clues</h2></div>

<div id="final-reveal">
  <canvas id="confetti"></canvas>
  <h1>üéâ FINAL DESTINATION üéâ</h1>
  <h1>POUR TAPROOM</h1>
</div>

<audio id="victory-sound" preload="auto" loop>
  <source src="https://www.soundjay.com/misc/sounds/fanfare-01.mp3" type="audio/mpeg">
</audio>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const questions = [
    { level: "easy", q: "Josh‚Äôs Favorite Movie", a: "blue streak", clue: "The bar is South of Rec Room" },
    { level: "easy", q: "Josh‚Äôs Favorite Song", a: "fourfive seconds", clue: "The bar is on King St" },
    { level: "easy", q: "Josh‚Äôs Current Celebrity Crush", a: "carrie underwood", clue: "The bar has beer" },
    { level: "easy", q: "Josh‚Äôs Favorite Sports University", a: "alabama", clue: "The bar is North of Calhoun St" },
    { level: "easy", q: "Restaurant with Josh‚Äôs Favorite Pizza", a: "evo", clue: "The name of the bar is in lyrics of a song by one of Rihanna, Hozier, or Leon Bridges" },
    { level: "easy", q: "Josh‚Äôs Most Played Video Game this Year", a: "fortnite", clue: "The bar has beer" },
    { level: "easy", q: "African country Josh lived in for 1 month", a: "kenya", clue: "The bar has a good view" },
    { level: "easy", q: "Josh‚Äôs Favorite Alabama QB", a: "bryce young", clue: "The bar is unassuming" },

    { level: "medium", q: "Josh‚Äôs Middle Name", a: "scott", clue: "The bar is not Stars" },
    { level: "medium", q: "Josh‚Äôs Second Favorite Song", a: "unwritten", clue: "The bar is not the Belmont" },
    { level: "medium", q: "Josh‚Äôs Childhood Celebrity Crush", a: "selena gomez", clue: "What goes up must come down" },
    { level: "medium", q: "Josh‚Äôs Mom's name", a: "monique", clue: "The bar serves food but has no server" },
    { level: "medium", q: "The pizza served at Josh's wedding", a: "mellow mushroom", clue: "The bar has brussel sprouts on the menu" },
    { level: "medium", q: "Brand of Josh‚Äôs Backpack Since the 7th Grade", a: "under armour", clue: "Josh has been cut off at this bar before" },
    { level: "medium", q: "European Country Josh lived in for 1 month", a: "latvia", clue: "Bar has between 4.3 and 4.7 Google rating" },
    { level: "medium", q: "First Name of Josh‚Äôs 70 year old friend", a: "gary", clue: "There is another one of these bars in a place that has never won a superbowl" },

    { level: "hard", q: "State Josh's granmother aka Mimi lives", a: "new mexico", clue: "The bar is technically two names but is referred to by one name" },
    { level: "hard", q: "Josh‚Äôs Second Favorite Artist who he just saw in concert", a: "leon bridges", clue: "The bar has games" },
    { level: "hard", q: "City Josh's grandpa lives in", a: "miami", clue: "The bar has an elevator" },
    { level: "hard", q: "Josh‚Äôs Apartment Number", a: "3718", clue: "The bar is just north of a place where you might go after a hangover" },
    { level: "hard", q: "Josh‚Äôs Maiden Name", a: "allaire", clue: "The bar is just south of the word for female in Japaneese" },
    { level: "hard", q: "How Many Surgeries did Josh have in High School?", a: "4", clue: "In the final round of wheel of fortune, using the letters provided, only one letter would be revealed in the name of the bar" },
    { level: "hard", q: "Josh‚Äôs birth city", a: "amarillo", clue: "Bar has 2 different vowels in name" },
    { level: "hard", q: "Josh‚Äôs Bench Press 1 Rep Max (have to use 2.5 lb plate)", a: "320", clue: "The bar serves lots of beer" },
    { level: "hard", q: "Number of Guys Josh has Kissed", a: "4", clue: "The bar is on the East side of King St" },
    { level: "hard", q: "Josh‚Äôs Favorite NFL Player", a: "devonta smith", clue: "Bar has a great view" },
    { level: "hard", q: "The legal first name of the player's jersey Josh is wearing today", a: "quintorris", clue: "The bars entrance slides open" }
  ];

  const attempts = JSON.parse(localStorage.getItem('attempts')) || {};
  const correctCount = JSON.parse(localStorage.getItem('correctCount')) || 0;
  let currentCorrect = correctCount;

  function saveProgress() {
    localStorage.setItem('attempts', JSON.stringify(attempts));
    localStorage.setItem('correctCount', currentCorrect);
  }

  function renderQuestions() {
    const levels = { easy: "easy", medium: "medium", hard: "hard" };
    questions.forEach((item, index) => {
      const section = document.getElementById(levels[item.level]);
      const btn = document.createElement('button');
      btn.textContent = `Question ${index+1}`;
      btn.className = 'question-btn';

      const clueDiv = document.createElement('div');
      clueDiv.className = 'clue';
      clueDiv.id = `clue-${index}`;

      if (!attempts[index]) attempts[index]=0;
      if (localStorage.getItem('clue-'+index)) {
        clueDiv.textContent = localStorage.getItem('clue-'+index);
        clueDiv.style.display = 'block';
        btn.disabled = true;
        btn.style.backgroundColor = '#ccc';
      }

      btn.addEventListener('click', () => {
        if (attempts[index]>=3) { alert("‚ùå Max attempts reached."); return; }
        const answer = prompt(item.q);
        if(!answer) return;
        if(answer.trim().toLowerCase() === item.a.toLowerCase()){
          if(!localStorage.getItem('clue-'+index)) currentCorrect++;
          clueDiv.textContent = "üïµÔ∏è Clue: "+item.clue;
          clueDiv.style.display='block';
          localStorage.setItem('clue-'+index, clueDiv.textContent);
          btn.disabled=true; btn.style.backgroundColor='#ccc';
          saveProgress();
          if(currentCorrect===questions.length) triggerFinalReveal();
        } else {
          attempts[index]++;
          saveProgress();
          if(attempts[index]>=3){
            btn.disabled=true; btn.style.backgroundColor='#f8d7da';
            clueDiv.textContent="üö´ Max attempts used, question locked";
            clueDiv.style.color="red"; clueDiv.style.display='block';
          } else alert(`‚ùå Incorrect. ${3-attempts[index]} attempt(s) left.`);
        }
      });
      section.appendChild(btn);
      section.appendChild(clueDiv);
    });
  }

  function triggerFinalReveal(){
    document.querySelectorAll('body > *:not(#final-reveal)').forEach(el=>el.style.display='none');
    const final = document.getElementById("final-reveal");
    final.style.display = "flex";
    startConfetti();
    document.getElementById("victory-sound").play();
  }

  function startConfetti() {
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    const confettiCount = 300;
    const confetti=[];
    for(let i=0;i<confettiCount;i++){
      confetti.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height-canvas.height,r:Math.random()*6+4,d:Math.random()*confettiCount,color:`hsl(${Math.random()*360},100%,50%)`,tilt:Math.floor(Math.random()*10)-10});
    }
    function draw(){ctx.clearRect(0,0,canvas.width,canvas.height); confetti.forEach(c=>{ctx.beginPath(); ctx.fillStyle=c.color; ctx.fillRect(c.x,c.y,c.r,c.r);}); update();}
    function update(){ confetti.forEach(c=>{ c.y+=Math.cos(c.d)+1+c.r/2; c.x+=Math.sin(0.5); if(c.y>canvas.height){c.y=-10; c.x=Math.random()*canvas.width;} });}
    (function animate(){requestAnimationFrame(animate); draw();})();
  }

  renderQuestions();
});
</script>

</body>
</html>
